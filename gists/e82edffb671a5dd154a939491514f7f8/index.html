
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Deploy ruby-ex with an OpenShift test environment Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../eaeb278460ca158a0fac9c5a3e71bfe8/" />
    
    
    <link rel="prev" href="../b16a8cb159a50f303205335bb452f655/" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../36c572fe58aeee703c829c94d9dc8a95/">
            
                <a href="../36c572fe58aeee703c829c94d9dc8a95/">
            
                    
                    Spin-up test Atomic Host with OpenStack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../6dc4ac1d6ac69c1de52aa69fbec94f6e/">
            
                <a href="../6dc4ac1d6ac69c1de52aa69fbec94f6e/">
            
                    
                    12 Factor Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../f1fd4efdc4699d5d98bb7e6680b7a157/">
            
                <a href="../f1fd4efdc4699d5d98bb7e6680b7a157/">
            
                    
                    Building Ceph
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../fd4c79dd67c14351bea021d47c784775/">
            
                <a href="../fd4c79dd67c14351bea021d47c784775/">
            
                    
                    Upload Fedora cloud image to OpenStack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../08852c5e9d79c29bb3d22ad630dac8d2/">
            
                <a href="../08852c5e9d79c29bb3d22ad630dac8d2/">
            
                    
                    Photon OS on OpenStack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../e18f9da84399a8028f66176f53ff7bb6/">
            
                <a href="../e18f9da84399a8028f66176f53ff7bb6/">
            
                    
                    Steam and Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../b16a8cb159a50f303205335bb452f655/">
            
                <a href="../b16a8cb159a50f303205335bb452f655/">
            
                    
                    Keystone from source
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.9" data-path="./">
            
                <a href="./">
            
                    
                    Deploy ruby-ex with an OpenShift test environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../eaeb278460ca158a0fac9c5a3e71bfe8/">
            
                <a href="../eaeb278460ca158a0fac9c5a3e71bfe8/">
            
                    
                    Create custom Fedora Atomic Host for OpenStack Magnum
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../454e852474e5bd976033c1c40feee0cf/">
            
                <a href="../454e852474e5bd976033c1c40feee0cf/">
            
                    
                    Restart devel environment 
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../04fdad7277463d2544a8f2fa9bebee72/">
            
                <a href="../04fdad7277463d2544a8f2fa9bebee72/">
            
                    
                    Deploy an OpenShift cluster
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../1496f8847e6cf2d6a695d63616631a1e/">
            
                <a href="../1496f8847e6cf2d6a695d63616631a1e/">
            
                    
                    Setup environment for Minishift development [WIP]
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../f95e3d7cc746957b073d659ff620c0fd/">
            
                <a href="../f95e3d7cc746957b073d659ff620c0fd/">
            
                    
                    Setup development environment for Minishift on Windows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../6e49a98b7b33b457f5ebcb787c94fc10/">
            
                <a href="../6e49a98b7b33b457f5ebcb787c94fc10/">
            
                    
                    Reset wireless to get DHCP assigned again
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../c66c7f00c101e34f8d7db2b2cbe9b943/">
            
                <a href="../c66c7f00c101e34f8d7db2b2cbe9b943/">
            
                    
                    Minishift hostfolders (manual mounting)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="../18607310e0b122eb3790558e6f4d0795/">
            
                <a href="../18607310e0b122eb3790558e6f4d0795/">
            
                    
                    Eclipse Che on Minishift
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="../ba9ae20dc0c1e05c36ad39c3ae444904/">
            
                <a href="../ba9ae20dc0c1e05c36ad39c3ae444904/">
            
                    
                    Use Minishift as a Docker platform
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="../aa5273d7021f724560dd8b5e0cafd100/">
            
                <a href="../aa5273d7021f724560dd8b5e0cafd100/">
            
                    
                    Run Eclipse Che
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="../ac1be4bcbd47513acf1aa4a56e28094e/">
            
                <a href="../ac1be4bcbd47513acf1aa4a56e28094e/">
            
                    
                    Use Minishift docker to run Eclipse Che
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="../53308315106277034c2400c69d043001/">
            
                <a href="../53308315106277034c2400c69d043001/">
            
                    
                    Visual Studio 2017 - Tomorrow Night Bright
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22" data-path="../463512b065ef1f919e63552138d776bf/">
            
                <a href="../463512b065ef1f919e63552138d776bf/">
            
                    
                    Query installed and available updates on Windows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="../d0c4e7396727bd362cd67e1e9e023385/">
            
                <a href="../d0c4e7396727bd362cd67e1e9e023385/">
            
                    
                    PsNee, an open source stealth modchip for the Sony Playstation 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24" data-path="../c2cba6cde46eb7968c5e8be974371dde/">
            
                <a href="../c2cba6cde46eb7968c5e8be974371dde/">
            
                    
                    Test of goroutines
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25" data-path="../e0aff56b57400f7dfc1f85dbe4ad7967/">
            
                <a href="../e0aff56b57400f7dfc1f85dbe4ad7967/">
            
                    
                    Minishift hostfolders
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.26" data-path="../514a5bb99781961694e7615ee145af83/">
            
                <a href="../514a5bb99781961694e7615ee145af83/">
            
                    
                    Exploring MobyLinuxVM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.27" data-path="../7cb36210bd5effdeb788c34d6b433ac8/">
            
                <a href="../7cb36210bd5effdeb788c34d6b433ac8/">
            
                    
                    Minishift registry mirror
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.28" data-path="../113ef636903c67b83b4878cd43d2dd3f/">
            
                <a href="../113ef636903c67b83b4878cd43d2dd3f/">
            
                    
                    C9 IDE on Docker for ...
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.29" data-path="../7df1ac9c89d5be7086af67fa981f8e50/">
            
                <a href="../7df1ac9c89d5be7086af67fa981f8e50/">
            
                    
                    Add swap to virtual machine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.30" data-path="../938802/">
            
                <a href="../938802/">
            
                    
                    Example of how to use BugzillaClient
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.31" data-path="../2436886/">
            
                <a href="../2436886/">
            
                    
                    Git post-update hook
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.32" data-path="../2885828/">
            
                <a href="../2885828/">
            
                    
                    The core algorithm/TOTP implementation used by GAuth: http://github.com/gbraad/gauth/
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.33" data-path="../a4226d855d4f6e2e8d5a/">
            
                <a href="../a4226d855d4f6e2e8d5a/">
            
                    
                    Deferred javaScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.34" data-path="../d0b627f911d07bd441ed/">
            
                <a href="../d0b627f911d07bd441ed/">
            
                    
                    Import SSH-keys from GitHub
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.35" data-path="../9ae58142919b79964f82/">
            
                <a href="../9ae58142919b79964f82/">
            
                    
                    Testfile for HTML rendering of ePUB
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.36" data-path="../0267fde061e30e8a2978/">
            
                <a href="../0267fde061e30e8a2978/">
            
                    
                    CardForge custom user decks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.37" data-path="../927860c0c7be21df14de/">
            
                <a href="../927860c0c7be21df14de/">
            
                    
                    Fling website to MatchStick or flingd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.38" data-path="../1830e1183d10be5b63e9/">
            
                <a href="../1830e1183d10be5b63e9/">
            
                    
                    On-device deployment of system-server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.39" data-path="../e87063d14da6535b88a6/README.md">
            
                <span>
            
                    
                    Boadgame alternative wishlist
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.40" data-path="../74cf1e795763dc33997a/README.md">
            
                <span>
            
                    
                    Install C9 on CentOS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.41" data-path="../18f7417ce4a5dae8aeb808fd58b3943d/">
            
                <a href="../18f7417ce4a5dae8aeb808fd58b3943d/">
            
                    
                    Fragile Development
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.42" data-path="../b4de477a892c9ff9b890d9c6ae8445bd/">
            
                <a href="../b4de477a892c9ff9b890d9c6ae8445bd/">
            
                    
                    Install TripleO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.43" data-path="../51bcd499dd7def19a1213381a1468f16/">
            
                <a href="../51bcd499dd7def19a1213381a1468f16/">
            
                    
                    Install TripleO on baremetal using Quickstart
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.44" data-path="../14ecfb87a2f90c6de05fe0eec5206f17/">
            
                <a href="../14ecfb87a2f90c6de05fe0eec5206f17/">
            
                    
                    Install one-liners
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.45" data-path="../45cbe30415b0dc631f5e8d20beaffebf/">
            
                <a href="../45cbe30415b0dc631f5e8d20beaffebf/">
            
                    
                    Download TripleO images
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.46" data-path="../24d84409bab816ce496e3ad1418705e5/">
            
                <a href="../24d84409bab816ce496e3ad1418705e5/">
            
                    
                    Import debootstrap into Docker container
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.47" data-path="../f2b364d1fb3533b8b5b32dc37ea2865c/">
            
                <a href="../f2b364d1fb3533b8b5b32dc37ea2865c/">
            
                    
                    Installing Ironic standalone
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.48" data-path="../14b19653a7124b4cf86daaa9df736b90/">
            
                <a href="../14b19653a7124b4cf86daaa9df736b90/">
            
                    
                    Generate HTML directory index
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.49" data-path="../74e47af442ef2fb4abc68c12a610f44f/">
            
                <a href="../74e47af442ef2fb4abc68c12a610f44f/">
            
                    
                    Add swap using Ansible
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Deploy ruby-ex with an OpenShift test environment</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="deploy-ruby-ex-with-an-openshift-test-environment">Deploy <code>ruby-ex</code> with an OpenShift test environment</h1>
<ul>
<li><a href="http://gbraad.nl/blog/deploy-an-openshift-test-cluster.html" target="_blank">http://gbraad.nl/blog/deploy-an-openshift-test-cluster.html</a></li>
</ul>
<h2 id="fedora-24-try-1">Fedora 24: Try #1</h2>
<pre><code>[fedora@openshift-controller ~]$ oc cluster up
-- Checking OpenShift client ... OK
-- Checking Docker client ... OK
-- Checking Docker version ... OK
-- Checking for existing OpenShift container ... 
   Deleted existing OpenShift container
-- Checking for openshift/origin:v1.3.0 image ... OK
-- Checking Docker daemon configuration ... OK
-- Checking for available ports ... OK
-- Checking type of volume mount ... 
   Using nsenter mounter for OpenShift volumes
-- Creating host directories ... OK
-- Finding server IP ... 
   Using 10.5.0.27 as the server IP
-- Starting OpenShift container ... 
   Creating initial OpenShift configuration
   Starting OpenShift using container &apos;origin&apos;
   Waiting for API server to start listening
   OpenShift server started
-- Installing registry ... OK
-- Installing router ... OK
-- Importing image streams ... OK
-- Importing templates ... OK
-- Login to server ... OK
-- Creating initial project &quot;myproject&quot; ... OK
-- Server Information ... 
   OpenShift server started.
   The server is accessible via web console at:
       https://10.5.0.27:8443

   You are logged in as:
       User:     developer
       Password: developer

   To login as administrator:
       oc login -u system:admin

[fedora@openshift-controller ~]$ oc new-app openshift/ruby-20-centos7~https://github.com/gbraad/ruby-ex
--&gt; Found Docker image 7f4e7f1 (5 days old) from Docker Hub for &quot;openshift/ruby-20-centos7&quot;

    Ruby 2.0 
    -------- 
    Platform for building and running Ruby 2.0 applications

    Tags: builder, ruby, ruby20

    * An image stream will be created as &quot;ruby-20-centos7:latest&quot; that will track the source image
    * A source build using source code from https://github.com/gbraad/ruby-ex will be created
      * The resulting image will be pushed to image stream &quot;ruby-ex:latest&quot;
      * Every time &quot;ruby-20-centos7:latest&quot; changes a new build will be triggered
    * This image will be deployed in deployment config &quot;ruby-ex&quot;
    * Port 8080/tcp will be load balanced by service &quot;ruby-ex&quot;
      * Other containers can access this service through the hostname &quot;ruby-ex&quot;

--&gt; Creating resources with label app=ruby-ex ...
    imagestream &quot;ruby-20-centos7&quot; created
    imagestream &quot;ruby-ex&quot; created
    buildconfig &quot;ruby-ex&quot; created
    deploymentconfig &quot;ruby-ex&quot; created
    service &quot;ruby-ex&quot; created
--&gt; Success
    Build scheduled, use &apos;oc logs -f bc/ruby-ex&apos; to track its progress.
    Run &apos;oc status&apos; to view your app.
[fedora@openshift-controller ~]$ oc get pod
NAME               READY     STATUS         RESTARTS   AGE
ruby-ex-1-build    0/1       Completed      0          1m
ruby-ex-1-deploy   1/1       Running        0          11s
ruby-ex-1-upy60    0/1       ErrImagePull   0          8s
[fedora@openshift-controller ~]$ oc logs bc/ruby-ex
Cloning &quot;https://github.com/gbraad/ruby-ex&quot; ...
        Commit: f63d076b602441ebd65fd0749c5c58ea4bafaf90 (Merge pull request #2 from mfojtik/add-puma)
        Author: Michal Fojtik &lt;mi@mifo.sk&gt;
        Date:   Thu Jun 30 10:47:53 2016 +0200
---&gt; Installing application source ...
---&gt; Building your Ruby application from source ...
---&gt; Running &apos;bundle install --deployment&apos; ...
Fetching gem metadata from https://rubygems.org/...............
Installing puma (3.4.0)
Installing rack (1.6.4)
Using bundler (1.3.5)
Cannot write a changed lockfile while frozen.
Your bundle is complete!
It was installed into ./bundle
---&gt; Cleaning up unused ruby gems ...
Pushing image 172.30.108.129:5000/myproject/ruby-ex:latest ...
Pushed 0/10 layers, 10% complete
Pushed 1/10 layers, 34% complete
Pushed 2/10 layers, 49% complete
Pushed 3/10 layers, 50% complete
Pushed 4/10 layers, 50% complete
Pushed 5/10 layers, 50% complete
Pushed 6/10 layers, 61% complete
Pushed 7/10 layers, 71% complete
Pushed 8/10 layers, 88% complete
Pushed 9/10 layers, 99% complete
Pushed 10/10 layers, 100% complete
Push successful
[fedora@openshift-controller ~]$ oc logs dc/ruby-ex
--&gt; Scaling ruby-ex-1 to 1
--&gt; Waiting up to 10m0s for pods in deployment ruby-ex-1 to become ready
[fedora@openshift-controller ~]$ oc get events
LASTSEEN   FIRSTSEEN   COUNT     NAME               KIND      SUBOBJECT                     TYPE      REASON       SOURCE                 MESSAGE
1m         1m          1         ruby-ex-1-build    Pod                                     Normal    Scheduled    {default-scheduler }   Successfully assigned ruby-ex-1-build to 10.5.0.27
1m         1m          1         ruby-ex-1-build    Pod       spec.containers{sti-build}    Normal    Pulled       {kubelet 10.5.0.27}    Container image &quot;openshift/origin-sti-builder:v1.3.0&quot; already present on machine
1m         1m          1         ruby-ex-1-build    Pod       spec.containers{sti-build}    Normal    Created      {kubelet 10.5.0.27}    Created container with docker id 9499a005289a
1m         1m          1         ruby-ex-1-build    Pod       spec.containers{sti-build}    Normal    Started      {kubelet 10.5.0.27}    Started container with docker id 9499a005289a
1m         1m          1         ruby-ex-1-build    Pod       spec.containers{sti-build}    Normal    Killing      {kubelet 10.5.0.27}    Killing container with docker id 9499a005289a: Need to kill pod.
1m         1m          1         ruby-ex-1-deploy   Pod                                     Normal    Scheduled    {default-scheduler }   Successfully assigned ruby-ex-1-deploy to 10.5.0.27
1m         1m          1         ruby-ex-1-deploy   Pod       spec.containers{deployment}   Normal    Pulled       {kubelet 10.5.0.27}    Container image &quot;openshift/origin-deployer:v1.3.0&quot; already present on machine
1m         1m          1         ruby-ex-1-deploy   Pod       spec.containers{deployment}   Normal    Created      {kubelet 10.5.0.27}    Created container with docker id 2aa73f59670a
1m         1m          1         ruby-ex-1-deploy   Pod       spec.containers{deployment}   Normal    Started      {kubelet 10.5.0.27}    Started container with docker id 2aa73f59670a
1m         1m          1         ruby-ex-1-upy60    Pod                                     Normal    Scheduled    {default-scheduler }   Successfully assigned ruby-ex-1-upy60 to 10.5.0.27
19s        1m          3         ruby-ex-1-upy60    Pod       spec.containers{ruby-ex}      Normal    Pulling      {kubelet 10.5.0.27}    pulling image &quot;172.30.108.129:5000/myproject/ruby-ex@sha256:391938826932d3d9e51d3be64bb8ad31286a73801fc5215f1f3fda1bc19f8e1a&quot;
19s        1m          3         ruby-ex-1-upy60    Pod       spec.containers{ruby-ex}      Warning   Failed       {kubelet 10.5.0.27}    Failed to pull image &quot;172.30.108.129:5000/myproject/ruby-ex@sha256:391938826932d3d9e51d3be64bb8ad31286a73801fc5215f1f3fda1bc19f8e1a&quot;: Cannot overwrite digest sha256:391938826932d3d9e51d3be64bb8ad31286a73801fc5215f1f3fda1bc19f8e1a
19s        1m          3         ruby-ex-1-upy60    Pod                                     Warning   FailedSync   {kubelet 10.5.0.27}    Error syncing pod, skipping: failed to &quot;StartContainer&quot; for &quot;ruby-ex&quot; with ErrImagePull: &quot;Cannot overwrite digest sha256:391938826932d3d9e51d3be64bb8ad31286a73801fc5215f1f3fda1bc19f8e1a&quot;

6s        59s       3         ruby-ex-1-upy60   Pod       spec.containers{ruby-ex}   Normal    BackOff      {kubelet 10.5.0.27}   Back-off pulling image &quot;172.30.108.129:5000/myproject/ruby-ex@sha256:391938826932d3d9e51d3be64bb8ad31286a73801fc5215f1f3fda1bc19f8e1a&quot;
6s        59s       3         ruby-ex-1-upy60   Pod                                  Warning   FailedSync   {kubelet 10.5.0.27}   Error syncing pod, skipping: failed to &quot;StartContainer&quot; for &quot;ruby-ex&quot; with ImagePullBackOff: &quot;Back-off pulling image \&quot;172.30.108.129:5000/myproject/ruby-ex@sha256:391938826932d3d9e51d3be64bb8ad31286a73801fc5215f1f3fda1bc19f8e1a\&quot;&quot;

1m        1m        1         ruby-ex-1   ReplicationController             Normal    SuccessfulCreate    {replication-controller }        Created pod: ruby-ex-1-upy60
1m        1m        1         ruby-ex     DeploymentConfig                  Normal    DeploymentCreated   {deploymentconfig-controller }   Created new deployment &quot;ruby-ex-1&quot; for version 1
[fedora@openshift-controller ~]$ docker pull 172.30.165.95:5000/myproject/ruby-ex:latest
Trying to pull repository 172.30.165.95:5000/myproject/ruby-ex ... 
^C
[fedora@openshift-controller ~]$ docker pull 172.30.108.129:5000/myproject/ruby-ex:latest
Trying to pull repository 172.30.108.129:5000/myproject/ruby-ex ... 
Pulling repository 172.30.108.129:5000/myproject/ruby-ex
Error: image myproject/ruby-ex not found
</code></pre><h2 id="fedora-24-try-2">Fedora 24: Try #2</h2>
<pre><code>[fedora@openshift-controller ~]$ oc cluster up
-- Checking OpenShift client ... OK
-- Checking Docker client ... OK
-- Checking Docker version ... OK
-- Checking for existing OpenShift container ... OK
-- Checking for openshift/origin:v1.3.0 image ... 
   Pulling image openshift/origin:v1.3.0
   Pulled 0/3 layers, 3% complete
   Pulled 1/3 layers, 52% complete
   Pulled 2/3 layers, 84% complete
   Pulled 3/3 layers, 100% complete
   Extracting
   Image pull complete
-- Checking Docker daemon configuration ... OK
-- Checking for available ports ... OK
-- Checking type of volume mount ... 
   Using nsenter mounter for OpenShift volumes
-- Creating host directories ... OK
-- Finding server IP ... 
   Using 10.5.0.27 as the server IP
-- Starting OpenShift container ... 
   Creating initial OpenShift configuration
   Starting OpenShift using container &apos;origin&apos;
   Waiting for API server to start listening
   OpenShift server started
-- Installing registry ... OK
-- Installing router ... OK
-- Importing image streams ... OK
-- Importing templates ... OK
-- Login to server ... OK
-- Creating initial project &quot;myproject&quot; ... OK
-- Server Information ... 
   OpenShift server started.
   The server is accessible via web console at:
       https://10.5.0.27:8443

   You are logged in as:
       User:     developer
       Password: developer

   To login as administrator:
       oc login -u system:admin

[fedora@openshift-controller ~]$ oc new-app openshift/ruby-20-centos7~https://github.com/gbraad/ruby-ex
--&gt; Found Docker image 7f4e7f1 (5 days old) from Docker Hub for &quot;openshift/ruby-20-centos7&quot;

    Ruby 2.0 
    -------- 
    Platform for building and running Ruby 2.0 applications

    Tags: builder, ruby, ruby20

    * An image stream will be created as &quot;ruby-20-centos7:latest&quot; that will track the source image
    * A source build using source code from https://github.com/gbraad/ruby-ex will be created
      * The resulting image will be pushed to image stream &quot;ruby-ex:latest&quot;
      * Every time &quot;ruby-20-centos7:latest&quot; changes a new build will be triggered
    * This image will be deployed in deployment config &quot;ruby-ex&quot;
    * Port 8080/tcp will be load balanced by service &quot;ruby-ex&quot;
      * Other containers can access this service through the hostname &quot;ruby-ex&quot;

--&gt; Creating resources with label app=ruby-ex ...
    imagestream &quot;ruby-20-centos7&quot; created
    imagestream &quot;ruby-ex&quot; created
    buildconfig &quot;ruby-ex&quot; created
    deploymentconfig &quot;ruby-ex&quot; created
    service &quot;ruby-ex&quot; created
--&gt; Success
    Build scheduled, use &apos;oc logs -f bc/ruby-ex&apos; to track its progress.
    Run &apos;oc status&apos; to view your app.
[fedora@openshift-controller ~]$ oc status
In project My Project (myproject) on server https://10.5.0.27:8443

svc/ruby-ex - 172.30.179.60:8080
  dc/ruby-ex deploys istag/ruby-ex:latest &lt;-
    bc/ruby-ex source builds https://github.com/gbraad/ruby-ex on istag/ruby-20-centos7:latest 
      build #1 running for about a minute - f63d076: Merge pull request #2 from mfojtik/add-puma (Michal Fojtik &lt;mi@mifo.sk&gt;)
    deployment #1 waiting on image or update

1 warning identified, use &apos;oc status -v&apos; to see details.
[fedora@openshift-controller ~]$ oc get pods
NAME              READY     STATUS    RESTARTS   AGE
ruby-ex-1-build   1/1       Running   0          1m
[fedora@openshift-controller ~]$ oc get pods
NAME              READY     STATUS    RESTARTS   AGE
ruby-ex-1-build   1/1       Running   0          1m
[fedora@openshift-controller ~]$ oc get pods
NAME               READY     STATUS             RESTARTS   AGE
ruby-ex-1-build    0/1       Completed          0          3m
ruby-ex-1-deploy   1/1       Running            0          1m
ruby-ex-1-wolq7    0/1       ImagePullBackOff   0          1m
[fedora@openshift-controller ~]$ oc get events
                                              LASTSEEN   FIRSTSEEN   COUNT     NAME               KIND      SUBOBJECT                     TYPE      REASON       SOURCE                 MESSAGE
3m         3m          1         ruby-ex-1-build    Pod                                     Normal    Scheduled    {default-scheduler }   Successfully assigned ruby-ex-1-build to 10.5.0.27
3m         3m          1         ruby-ex-1-build    Pod       spec.containers{sti-build}    Normal    Pulling      {kubelet 10.5.0.27}    pulling image &quot;openshift/origin-sti-builder:v1.3.0&quot;
3m         3m          1         ruby-ex-1-build    Pod       spec.containers{sti-build}    Normal    Pulled       {kubelet 10.5.0.27}    Successfully pulled image &quot;openshift/origin-sti-builder:v1.3.0&quot;
3m         3m          1         ruby-ex-1-build    Pod       spec.containers{sti-build}    Normal    Created      {kubelet 10.5.0.27}    Created container with docker id 1006f2387054
3m         3m          1         ruby-ex-1-build    Pod       spec.containers{sti-build}    Normal    Started      {kubelet 10.5.0.27}    Started container with docker id 1006f2387054
1m         1m          1         ruby-ex-1-deploy   Pod                                     Normal    Scheduled    {default-scheduler }   Successfully assigned ruby-ex-1-deploy to 10.5.0.27
1m         1m          1         ruby-ex-1-deploy   Pod       spec.containers{deployment}   Normal    Pulled       {kubelet 10.5.0.27}    Container image &quot;openshift/origin-deployer:v1.3.0&quot; already present on machine
1m         1m          1         ruby-ex-1-deploy   Pod       spec.containers{deployment}   Normal    Created      {kubelet 10.5.0.27}    Created container with docker id f1042c7eeade
1m         1m          1         ruby-ex-1-deploy   Pod       spec.containers{deployment}   Normal    Started      {kubelet 10.5.0.27}    Started container with docker id f1042c7eeade
1m         1m          1         ruby-ex-1-wolq7    Pod                                     Normal    Scheduled    {default-scheduler }   Successfully assigned ruby-ex-1-wolq7 to 10.5.0.27
15s        1m          4         ruby-ex-1-wolq7    Pod       spec.containers{ruby-ex}      Normal    Pulling      {kubelet 10.5.0.27}    pulling image &quot;172.30.211.23:5000/myproject/ruby-ex@sha256:050a263ccf9db73bf688f22f7fdcb690d588dbd1cc8c5a7f50b461ef64dcc88d&quot;
15s        1m          4         ruby-ex-1-wolq7    Pod       spec.containers{ruby-ex}      Warning   Failed       {kubelet 10.5.0.27}    Failed to pull image &quot;172.30.211.23:5000/myproject/ruby-ex@sha256:050a263ccf9db73bf688f22f7fdcb690d588dbd1cc8c5a7f50b461ef64dcc88d&quot;: Cannot overwrite digest sha256:050a263ccf9db73bf688f22f7fdcb690d588dbd1cc8c5a7f50b461ef64dcc88d
15s        1m          4         ruby-ex-1-wolq7    Pod                                     Warning   FailedSync   {kubelet 10.5.0.27}    Error syncing pod, skipping: failed to &quot;StartContainer&quot; for &quot;ruby-ex&quot; with ErrImagePull: &quot;Cannot overwrite digest sha256:050a263ccf9db73bf688f22f7fdcb690d588dbd1cc8c5a7f50b461ef64dcc88d&quot;

2s        1m        6         ruby-ex-1-wolq7   Pod       spec.containers{ruby-ex}   Normal    BackOff      {kubelet 10.5.0.27}   Back-off pulling image &quot;172.30.211.23:5000/myproject/ruby-ex@sha256:050a263ccf9db73bf688f22f7fdcb690d588dbd1cc8c5a7f50b461ef64dcc88d&quot;
2s        1m        6         ruby-ex-1-wolq7   Pod                                  Warning   FailedSync   {kubelet 10.5.0.27}   Error syncing pod, skipping: failed to &quot;StartContainer&quot; for &quot;ruby-ex&quot; with ImagePullBackOff: &quot;Back-off pulling image \&quot;172.30.211.23:5000/myproject/ruby-ex@sha256:050a263ccf9db73bf688f22f7fdcb690d588dbd1cc8c5a7f50b461ef64dcc88d\&quot;&quot;

1m        1m        1         ruby-ex-1   ReplicationController             Normal    SuccessfulCreate    {replication-controller }        Created pod: ruby-ex-1-wolq7
1m        1m        1         ruby-ex     DeploymentConfig                  Normal    DeploymentCreated   {deploymentconfig-controller }   Created new deployment &quot;ruby-ex-1&quot; for version 1
</code></pre><h2 id="centos-7">CentOS 7</h2>
<pre><code>[root@openshift-c7 ~]#  oc new-app openshift/ruby-20-centos7~https://github.com/gbraad/ruby-ex
--&gt; Found Docker image 7f4e7f1 (5 days old) from Docker Hub for &quot;openshift/ruby-20-centos7&quot;

    Ruby 2.0 
    -------- 
    Platform for building and running Ruby 2.0 applications

    Tags: builder, ruby, ruby20

    * An image stream will be created as &quot;ruby-20-centos7:latest&quot; that will track the source image
    * A source build using source code from https://github.com/gbraad/ruby-ex will be created
      * The resulting image will be pushed to image stream &quot;ruby-ex:latest&quot;
      * Every time &quot;ruby-20-centos7:latest&quot; changes a new build will be triggered
    * This image will be deployed in deployment config &quot;ruby-ex&quot;
    * Port 8080/tcp will be load balanced by service &quot;ruby-ex&quot;
      * Other containers can access this service through the hostname &quot;ruby-ex&quot;

--&gt; Creating resources with label app=ruby-ex ...
    imagestream &quot;ruby-20-centos7&quot; created
    imagestream &quot;ruby-ex&quot; created
    buildconfig &quot;ruby-ex&quot; created
    deploymentconfig &quot;ruby-ex&quot; created
    service &quot;ruby-ex&quot; created
--&gt; Success
    Build scheduled, use &apos;oc logs -f bc/ruby-ex&apos; to track its progress.
    Run &apos;oc status&apos; to view your app.
[root@openshift-c7 ~]# oc get pod
NAME              READY     STATUS    RESTARTS   AGE
ruby-ex-1-build   1/1       Running   0          5s
[root@openshift-c7 ~]# oc get pod
NAME              READY     STATUS    RESTARTS   AGE
ruby-ex-1-build   1/1       Running   0          1m
[root@openshift-c7 ~]# oc get events
LASTSEEN   FIRSTSEEN   COUNT     NAME              KIND      SUBOBJECT                    TYPE      REASON      SOURCE                 MESSAGE
1m         1m          1         ruby-ex-1-build   Pod                                    Normal    Scheduled   {default-scheduler }   Successfully assigned ruby-ex-1-build to 10.5.0.30
1m         1m          1         ruby-ex-1-build   Pod       spec.containers{sti-build}   Normal    Pulling     {kubelet 10.5.0.30}    pulling image &quot;openshift/origin-sti-builder:v1.3.0&quot;
1m         1m          1         ruby-ex-1-build   Pod       spec.containers{sti-build}   Normal    Pulled      {kubelet 10.5.0.30}    Successfully pulled image &quot;openshift/origin-sti-builder:v1.3.0&quot;
1m         1m          1         ruby-ex-1-build   Pod       spec.containers{sti-build}   Normal    Created     {kubelet 10.5.0.30}    Created container with docker id 71ea86697231
1m         1m          1         ruby-ex-1-build   Pod       spec.containers{sti-build}   Normal    Started     {kubelet 10.5.0.30}    Started container with docker id 71ea86697231
[root@openshift-c7 ~]# oc get pod                                                                                                                                                          
NAME              READY     STATUS      RESTARTS   AGE
ruby-ex-1-an801   1/1       Running     0          26s
ruby-ex-1-build   0/1       Completed   0          1m
[root@openshift-c7 ~]# oc get events
LASTSEEN   FIRSTSEEN   COUNT     NAME               KIND                    SUBOBJECT                     TYPE      REASON              SOURCE                           MESSAGE
30s        30s         1         ruby-ex-1-an801    Pod                                                   Normal    Scheduled           {default-scheduler }             Successfully assigned ruby-ex-1-an801 to 10.5.0.30
29s        29s         1         ruby-ex-1-an801    Pod                     spec.containers{ruby-ex}      Normal    Pulling             {kubelet 10.5.0.30}              pulling image &quot;172.30.179.146:5000/myproject/ruby-ex@sha256:a2f0af1e82c3642d7c9c8b45d7b6aefa1dc288aacf60c1874329b2e3fa2908c3&quot;
29s        29s         1         ruby-ex-1-an801    Pod                     spec.containers{ruby-ex}      Normal    Pulled              {kubelet 10.5.0.30}              Successfully pulled image &quot;172.30.179.146:5000/myproject/ruby-ex@sha256:a2f0af1e82c3642d7c9c8b45d7b6aefa1dc288aacf60c1874329b2e3fa2908c3&quot;
29s        29s         1         ruby-ex-1-an801    Pod                     spec.containers{ruby-ex}      Normal    Created             {kubelet 10.5.0.30}              Created container with docker id 4f5b24b08c05
29s        29s         1         ruby-ex-1-an801    Pod                     spec.containers{ruby-ex}      Normal    Started             {kubelet 10.5.0.30}              Started container with docker id 4f5b24b08c05
1m         1m          1         ruby-ex-1-build    Pod                                                   Normal    Scheduled           {default-scheduler }             Successfully assigned ruby-ex-1-build to 10.5.0.30
1m         1m          1         ruby-ex-1-build    Pod                     spec.containers{sti-build}    Normal    Pulling             {kubelet 10.5.0.30}              pulling image &quot;openshift/origin-sti-builder:v1.3.0&quot;
1m         1m          1         ruby-ex-1-build    Pod                     spec.containers{sti-build}    Normal    Pulled              {kubelet 10.5.0.30}              Successfully pulled image &quot;openshift/origin-sti-builder:v1.3.0&quot;
1m         1m          1         ruby-ex-1-build    Pod                     spec.containers{sti-build}    Normal    Created             {kubelet 10.5.0.30}              Created container with docker id 71ea86697231
1m         1m          1         ruby-ex-1-build    Pod                     spec.containers{sti-build}    Normal    Started             {kubelet 10.5.0.30}              Started container with docker id 71ea86697231
33s        33s         1         ruby-ex-1-deploy   Pod                                                   Normal    Scheduled           {default-scheduler }             Successfully assigned ruby-ex-1-deploy to 10.5.0.30
32s        32s         1         ruby-ex-1-deploy   Pod                     spec.containers{deployment}   Normal    Pulled              {kubelet 10.5.0.30}              Container image &quot;openshift/origin-deployer:v1.3.0&quot; already present on machine
32s        32s         1         ruby-ex-1-deploy   Pod                     spec.containers{deployment}   Normal    Created             {kubelet 10.5.0.30}              Created container with docker id f427fc952dab
32s        32s         1         ruby-ex-1-deploy   Pod                     spec.containers{deployment}   Normal    Started             {kubelet 10.5.0.30}              Started container with docker id f427fc952dab
30s        30s         1         ruby-ex-1          ReplicationController                                 Normal    SuccessfulCreate    {replication-controller }        Created pod: ruby-ex-1-an801
33s        33s         1         ruby-ex            DeploymentConfig                                      Normal    DeploymentCreated   {deploymentconfig-controller }   Created new deployment &quot;ruby-ex-1&quot; for version 1
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../b16a8cb159a50f303205335bb452f655/" class="navigation navigation-prev " aria-label="Previous page: Keystone from source">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../eaeb278460ca158a0fac9c5a3e71bfe8/" class="navigation navigation-next " aria-label="Next page: Create custom Fedora Atomic Host for OpenStack Magnum">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Deploy ruby-ex with an OpenShift test environment","level":"1.9","depth":1,"next":{"title":"Create custom Fedora Atomic Host for OpenStack Magnum","level":"1.10","depth":1,"path":"gists/eaeb278460ca158a0fac9c5a3e71bfe8/README.md","ref":"gists/eaeb278460ca158a0fac9c5a3e71bfe8/README.md","articles":[]},"previous":{"title":"Keystone from source","level":"1.8","depth":1,"path":"gists/b16a8cb159a50f303205335bb452f655/README.md","ref":"gists/b16a8cb159a50f303205335bb452f655/README.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"gists/e82edffb671a5dd154a939491514f7f8/README.md","mtime":"2017-08-30T14:57:30.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-08-30T14:57:33.167Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

